<% provide(:title, 'Graphe') %>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script src="assets/springy.js"></script>
<script src="assets/springyui.js"></script>

<script>
var graph = new Graph();

var noeud = new Array();
<% Chapter.all.each do |chapter|%>
noeud[<%= chapter.id %>] = graph.newNode({label: "<%= chapter.name.html_safe %>", color: 'FFFFFF'});
<% end %>

<% Prerequisite.all.each do |p| %>
graph.newEdge(noeud[<%= p.prerequisite_id %>], noeud[<%= p.chapter_id %>]);
<% end %>


$(document).ready(function() {
  var springy = window.springy = jQuery('#structure').springy({
    graph: graph,
      nodeSelected: function(node) {
        console.log('Node selected: ' + JSON.stringify(node.data));
      }
  });
});
</script>
<center>
<canvas id="structure" style="border:1px solid #c3c3c3;" width="800" height="480">
Votre navigateur ne support pas de canvas.
</canvas>
</center>
