<% mois = ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre"] %>

<h2>Commentaires</h2>

<% @submission.corrections.each do |correction| %>

  <table class="table table-bordered" style="margin-top:20px;">
  <% if correction.user == @submission.user %>
    <tr class="info">
  <% else %>
    <tr class="error">
  <% end %>
  <td style="font-size:20px; font-weight:bold; padding:15px; border-right:none;"><%= link_to correction.user.name, correction.user, {:style => "color:#{correction.user.level[:color]}" } %></td>
  <td style="text-align:right; font-size:20px; padding:15px; border-left:none;">
  <% date = correction.created_at.in_time_zone %>
  <%= date.day %> <%= mois[date.month-1] %> <%= date.year %> à <%= date.hour %>h<%= "0" if date.min < 10 %><%= date.min %>
  </td>
  </tr>

  <tr><td colspan="2" style="padding:15px;">
  <div>
  <%= raw((h correction.content.gsub(/\\][ \r]*\n/,'\] ').gsub(/\$\$[ \r]*\n/,'$$ ')).gsub(/\n/, '<br>')) %>
  </div>
  </td></tr>

  </table>

<% end %>
